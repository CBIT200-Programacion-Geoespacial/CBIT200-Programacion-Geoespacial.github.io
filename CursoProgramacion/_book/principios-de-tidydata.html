<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Capítulo 3 Principios de Tidydata | Introducción al Análisis de Datos Geoespaciales</title>
  <meta name="description" content="Gitbook para el curso Introducción al Análisis de Geoespaciales (CBIT200), Universidad Austral de Chile" />
  <meta name="generator" content="bookdown 0.35 and GitBook 2.6.7" />

  <meta property="og:title" content="Capítulo 3 Principios de Tidydata | Introducción al Análisis de Datos Geoespaciales" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Gitbook para el curso Introducción al Análisis de Geoespaciales (CBIT200), Universidad Austral de Chile" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Capítulo 3 Principios de Tidydata | Introducción al Análisis de Datos Geoespaciales" />
  
  <meta name="twitter:description" content="Gitbook para el curso Introducción al Análisis de Geoespaciales (CBIT200), Universidad Austral de Chile" />
  

<meta name="author" content="Horacio Samaniego, Derek Corcoran, Giorgia Graells" />


<meta name="date" content="2023-08-18" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introducción.html"/>

<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Introducción al Análisis Geoespacial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Datos del curso</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#descripción-del-curso"><i class="fa fa-check"></i><b>1.1</b> DESCRIPCIÓN DEL CURSO</a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="index.html"><a href="index.html#objetivos"><i class="fa fa-check"></i><b>1.1.1</b> OBJETIVOS</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#evaluación"><i class="fa fa-check"></i><b>1.2</b> Evaluación</a>
<ul>
<li class="chapter" data-level="1.2.1" data-path="index.html"><a href="index.html#tareas"><i class="fa fa-check"></i><b>1.2.1</b> tareas</a></li>
<li class="chapter" data-level="1.2.2" data-path="index.html"><a href="index.html#proyecto"><i class="fa fa-check"></i><b>1.2.2</b> proyecto</a></li>
<li class="chapter" data-level="1.2.3" data-path="index.html"><a href="index.html#calificaciones"><i class="fa fa-check"></i><b>1.2.3</b> calificaciones</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#calendario"><i class="fa fa-check"></i><b>1.3</b> Calendario</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#recursos-adicionales"><i class="fa fa-check"></i><b>1.4</b> Recursos adicionales</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="introducción.html"><a href="introducción.html"><i class="fa fa-check"></i><b>2</b> Introducción</a>
<ul>
<li class="chapter" data-level="2.1" data-path="introducción.html"><a href="introducción.html#objetos"><i class="fa fa-check"></i><b>2.1</b> Objetos</a></li>
<li class="chapter" data-level="2.2" data-path="introducción.html"><a href="introducción.html#variables"><i class="fa fa-check"></i><b>2.2</b> Variables</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="introducción.html"><a href="introducción.html#tipos-de-variables"><i class="fa fa-check"></i><b>2.2.1</b> Tipos de variables</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="introducción.html"><a href="introducción.html#funciones"><i class="fa fa-check"></i><b>2.3</b> Funciones</a></li>
<li class="chapter" data-level="2.4" data-path="introducción.html"><a href="introducción.html#vectores"><i class="fa fa-check"></i><b>2.4</b> Vectores</a></li>
<li class="chapter" data-level="2.5" data-path="introducción.html"><a href="introducción.html#instalar-librerías"><i class="fa fa-check"></i><b>2.5</b> Instalar librerías</a></li>
<li class="chapter" data-level="2.6" data-path="introducción.html"><a href="introducción.html#r-notebook"><i class="fa fa-check"></i><b>2.6</b> R Notebook</a></li>
<li class="chapter" data-level="2.7" data-path="introducción.html"><a href="introducción.html#leer-datos"><i class="fa fa-check"></i><b>2.7</b> Leer datos</a></li>
<li class="chapter" data-level="2.8" data-path="introducción.html"><a href="introducción.html#ejercicios"><i class="fa fa-check"></i><b>2.8</b> Ejercicios</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html"><i class="fa fa-check"></i><b>3</b> Principios de Tidydata</a>
<ul>
<li class="chapter" data-level="3.1" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#definiciones"><i class="fa fa-check"></i><b>3.1</b> Definiciones</a></li>
<li class="chapter" data-level="3.2" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#lógica-y-funciones"><i class="fa fa-check"></i><b>3.2</b> Lógica y funciones</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#funciones-esenciales"><i class="fa fa-check"></i><b>3.2.1</b> Funciones esenciales</a></li>
<li class="chapter" data-level="3.2.2" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#pipe"><i class="fa fa-check"></i><b>3.2.2</b> pipe</a></li>
<li class="chapter" data-level="3.2.3" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#agrupar"><i class="fa fa-check"></i><b>3.2.3</b> Agrupar</a></li>
<li class="chapter" data-level="3.2.4" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#filtrar"><i class="fa fa-check"></i><b>3.2.4</b> Filtrar</a></li>
<li class="chapter" data-level="3.2.5" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#crear-nuevas-variables"><i class="fa fa-check"></i><b>3.2.5</b> Crear nuevas variables</a></li>
<li class="chapter" data-level="3.2.6" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#responder"><i class="fa fa-check"></i><b>3.2.6</b> Responder:</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#cambiar-formato-de-tabla"><i class="fa fa-check"></i><b>3.3</b> Cambiar formato de tabla</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#podemos-explicar-que-sucedió-aquí"><i class="fa fa-check"></i><b>3.3.1</b> ¿Podemos explicar que sucedió aquí?</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="principios-de-tidydata.html"><a href="principios-de-tidydata.html#recursos"><i class="fa fa-check"></i><b>3.4</b> Recursos</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Publicado con bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introducción al Análisis de Datos Geoespaciales</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="principios-de-tidydata" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Capítulo 3</span> Principios de Tidydata<a href="principios-de-tidydata.html#principios-de-tidydata" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Gran parte del manejo de datos consiste en limpiar, ordenar, redistribuir, reemplazar datos.
La gran mayoría de esas tareas son complejas y repetitivas.</p>
<p>Se dice <a href="https://cran.r-project.org/web/packages/tidyr/vignettes/tidy-data.html">aqui</a> que:</p>
<blockquote>
<p>Los principios de tidydata (datos ordenados, en castellano) proporcionan una forma estándar de organizar los valores de los datos dentro de un conjunto de datos. Un estándar facilita la limpieza inicial de los datos, ya que no es necesario empezar de cero y reinventar la rueda cada vez. El estándar tidydata se ha diseñado para facilitar la exploración y el análisis de los datos, y para simplificar el desarrollo de herramientas de análisis de datos que funcionen bien juntas. Las herramientas actuales suelen requerir traducción. Hay que dedicar tiempo a procesar los resultados de una herramienta para poder introducirlos en otra. Los conjuntos de datos ordenados y las herramientas ordenadas trabajan codo a codo para facilitar el análisis, lo que permite centrarse en la parte interesante del problema, no en lo “aburrido” de la logística de los datos.</p>
</blockquote>
<div id="definiciones" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Definiciones<a href="principios-de-tidydata.html#definiciones" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>En el manejo estadístico de los datos estructuramos, usualmente, con tablas (dataframes) con filas y columnas. Las columnas siempre tienen títulos, aunque las filas solo a veces.</p>
<div class="float">
<img src="https://d33wubrfki0l68.cloudfront.net/6f1ddb544fc5c69a2478e444ab8112fb0eea23f8/91adc/images/tidy-1.png" alt="Elementos de una tabla" />
<div class="figcaption">Elementos de una tabla</div>
</div>
<p>Usemos el set de datos de ejemplo llamado <code>iris</code>, pero le vamos a agregar un año de colecta ficticio. Para eso, vamos a crear un vector con 3 fechas asignadas de forma aleatoria a cada fila. Veamos las primeras 7 filas con la función <code>head()</code>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="principios-de-tidydata.html#cb1-1" tabindex="-1"></a><span class="fu">data</span>(iris)</span>
<span id="cb1-2"><a href="principios-de-tidydata.html#cb1-2" tabindex="-1"></a>año <span class="ot">&lt;-</span> <span class="fu">sample</span>(<span class="fu">rep</span>(<span class="fu">c</span>(<span class="st">&quot;2003&quot;</span>,<span class="st">&quot;2013&quot;</span>,<span class="st">&quot;2023&quot;</span>), <span class="fu">nrow</span>(iris) <span class="sc">/</span> <span class="dv">3</span>))</span>
<span id="cb1-3"><a href="principios-de-tidydata.html#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="principios-de-tidydata.html#cb1-4" tabindex="-1"></a>iris<span class="sc">$</span>Año <span class="ot">&lt;-</span> año</span>
<span id="cb1-5"><a href="principios-de-tidydata.html#cb1-5" tabindex="-1"></a></span>
<span id="cb1-6"><a href="principios-de-tidydata.html#cb1-6" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(iris,<span class="dv">7</span>))</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
<th style="text-align:right;">
Petal.Length
</th>
<th style="text-align:right;">
Petal.Width
</th>
<th style="text-align:left;">
Species
</th>
<th style="text-align:left;">
Año
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
5.1
</td>
<td style="text-align:right;">
3.5
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:left;">
2023
</td>
</tr>
<tr>
<td style="text-align:right;">
4.9
</td>
<td style="text-align:right;">
3.0
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:left;">
2003
</td>
</tr>
<tr>
<td style="text-align:right;">
4.7
</td>
<td style="text-align:right;">
3.2
</td>
<td style="text-align:right;">
1.3
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:left;">
2003
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.1
</td>
<td style="text-align:right;">
1.5
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:left;">
2023
</td>
</tr>
<tr>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
3.6
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.2
</td>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:left;">
2023
</td>
</tr>
<tr>
<td style="text-align:right;">
5.4
</td>
<td style="text-align:right;">
3.9
</td>
<td style="text-align:right;">
1.7
</td>
<td style="text-align:right;">
0.4
</td>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:left;">
2013
</td>
</tr>
<tr>
<td style="text-align:right;">
4.6
</td>
<td style="text-align:right;">
3.4
</td>
<td style="text-align:right;">
1.4
</td>
<td style="text-align:right;">
0.3
</td>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:left;">
2013
</td>
</tr>
</tbody>
</table>
</div>
<div id="lógica-y-funciones" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Lógica y funciones<a href="principios-de-tidydata.html#lógica-y-funciones" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>La lógica básica para el manejo de datos usando <code>dplyr</code> es que el resultado de una operación puede ser “conectada” a otra, lo que facilita la letura del código cuando lo revisitamos. Para eso existe una operador que hace esta conexión.</p>
<div id="funciones-esenciales" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Funciones esenciales<a href="principios-de-tidydata.html#funciones-esenciales" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><em>pipe</em>: <em>|&gt;</em></li>
<li><em>group_by</em> (agrupa datos)</li>
<li><em>summarize</em> (resume datos agrupados)</li>
<li><em>filter</em> (Encuentra filas con ciertas condiciones)</li>
<li><em>select</em> junto a <em>starts_with</em>, <em>ends_with</em> o <em>contains</em></li>
<li><em>mutate</em> (Genera variables nuevas)</li>
<li><em>arrange</em> ordenar</li>
</ul>
</div>
<div id="pipe" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> pipe<a href="principios-de-tidydata.html#pipe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Esta “conexión”, se hace con este operador <code>%&gt;%</code> o bien <code>|&gt;</code>. La diferencia entre los dos es que el uso del segundo no debieras requerir pre cargar la librería y es de uso mas reciente.</p>
<p>por ejemplo, podemos calcular el largo promedio de los petalos de las especie en el set de datos <code>iris</code>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="principios-de-tidydata.html#cb2-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb2-2"><a href="principios-de-tidydata.html#cb2-2" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb2-3"><a href="principios-de-tidydata.html#cb2-3" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span></span>
<span id="cb2-4"><a href="principios-de-tidydata.html#cb2-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Promedio=</span><span class="fu">mean</span>(Petal.Length)) </span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##   Species    Promedio
##   &lt;fct&gt;         &lt;dbl&gt;
## 1 setosa         1.46
## 2 versicolor     4.26
## 3 virginica      5.55</code></pre>
</div>
<div id="agrupar" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Agrupar<a href="principios-de-tidydata.html#agrupar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>dplyr</code> provee un set acotado de funciones, pero muy poderosas para manejar y ordenarnos con los datos. El ejemplo anterior muestra como se conecta una función con otra. Lo primero que hace es definir la tabla sobre la que vamos a trabajar, <code>iris</code>. Esta tabla es luego agrupada por la columna Species que es finalmente usada en la función <code>summarize</code> para calcular la media sobre los groupos de filas para cada especie.</p>
<p>De forma similar, podriamos también buscar la varianza de todas las columnas que son de tipo numérico, adjuntar una columna con el número de filas sobre el que calculamos dicha varianza y luego imprimirla a la pantalla de forma mas estilizada.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="principios-de-tidydata.html#cb4-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="principios-de-tidydata.html#cb4-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Species) <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="principios-de-tidydata.html#cb4-3" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), var, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">N =</span> <span class="fu">n</span>())<span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="principios-de-tidydata.html#cb4-4" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-5"><a href="principios-de-tidydata.html#cb4-5" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(<span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">&quot;striped&quot;</span>, <span class="st">&quot;hover&quot;</span>, <span class="st">&quot;condensed&quot;</span>, <span class="st">&quot;responsive&quot;</span>), <span class="at">full_width =</span> F)</span></code></pre></div>
<table class="table table-striped table-hover table-condensed table-responsive" style="width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
Species
</th>
<th style="text-align:right;">
Sepal.Length
</th>
<th style="text-align:right;">
Sepal.Width
</th>
<th style="text-align:right;">
Petal.Length
</th>
<th style="text-align:right;">
Petal.Width
</th>
<th style="text-align:right;">
N
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
setosa
</td>
<td style="text-align:right;">
0.1242490
</td>
<td style="text-align:right;">
0.1436898
</td>
<td style="text-align:right;">
0.0301592
</td>
<td style="text-align:right;">
0.0111061
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:left;">
versicolor
</td>
<td style="text-align:right;">
0.2664327
</td>
<td style="text-align:right;">
0.0984694
</td>
<td style="text-align:right;">
0.2208163
</td>
<td style="text-align:right;">
0.0391061
</td>
<td style="text-align:right;">
50
</td>
</tr>
<tr>
<td style="text-align:left;">
virginica
</td>
<td style="text-align:right;">
0.4043429
</td>
<td style="text-align:right;">
0.1040041
</td>
<td style="text-align:right;">
0.3045878
</td>
<td style="text-align:right;">
0.0754327
</td>
<td style="text-align:right;">
50
</td>
</tr>
</tbody>
</table>
</div>
<div id="filtrar" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Filtrar<a href="principios-de-tidydata.html#filtrar" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Filter nos permite encontrar, y operar, solo sobre filas que cumplen una condición determinada. Por ejemplo solo un tipo de especie</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="principios-de-tidydata.html#cb5-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="principios-de-tidydata.html#cb5-2" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">&#39;virginica&#39;</span>)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width   Species  Año
## 1           6.3         3.3          6.0         2.5 virginica 2013
## 2           5.8         2.7          5.1         1.9 virginica 2023
## 3           7.1         3.0          5.9         2.1 virginica 2023
## 4           6.3         2.9          5.6         1.8 virginica 2023
## 5           6.5         3.0          5.8         2.2 virginica 2003
## 6           7.6         3.0          6.6         2.1 virginica 2023
## 7           4.9         2.5          4.5         1.7 virginica 2013
## 8           7.3         2.9          6.3         1.8 virginica 2013
## 9           6.7         2.5          5.8         1.8 virginica 2003
## 10          7.2         3.6          6.1         2.5 virginica 2013
## 11          6.5         3.2          5.1         2.0 virginica 2003
## 12          6.4         2.7          5.3         1.9 virginica 2013
## 13          6.8         3.0          5.5         2.1 virginica 2003
## 14          5.7         2.5          5.0         2.0 virginica 2013
## 15          5.8         2.8          5.1         2.4 virginica 2003
## 16          6.4         3.2          5.3         2.3 virginica 2023
## 17          6.5         3.0          5.5         1.8 virginica 2013
## 18          7.7         3.8          6.7         2.2 virginica 2003
## 19          7.7         2.6          6.9         2.3 virginica 2013
## 20          6.0         2.2          5.0         1.5 virginica 2013
## 21          6.9         3.2          5.7         2.3 virginica 2023
## 22          5.6         2.8          4.9         2.0 virginica 2003
## 23          7.7         2.8          6.7         2.0 virginica 2013
## 24          6.3         2.7          4.9         1.8 virginica 2023
## 25          6.7         3.3          5.7         2.1 virginica 2013
## 26          7.2         3.2          6.0         1.8 virginica 2023
## 27          6.2         2.8          4.8         1.8 virginica 2003
## 28          6.1         3.0          4.9         1.8 virginica 2023
## 29          6.4         2.8          5.6         2.1 virginica 2013
## 30          7.2         3.0          5.8         1.6 virginica 2013
## 31          7.4         2.8          6.1         1.9 virginica 2013
## 32          7.9         3.8          6.4         2.0 virginica 2003
## 33          6.4         2.8          5.6         2.2 virginica 2003
## 34          6.3         2.8          5.1         1.5 virginica 2023
## 35          6.1         2.6          5.6         1.4 virginica 2003
## 36          7.7         3.0          6.1         2.3 virginica 2003
## 37          6.3         3.4          5.6         2.4 virginica 2003
## 38          6.4         3.1          5.5         1.8 virginica 2013
## 39          6.0         3.0          4.8         1.8 virginica 2003
## 40          6.9         3.1          5.4         2.1 virginica 2023
## 41          6.7         3.1          5.6         2.4 virginica 2013
## 42          6.9         3.1          5.1         2.3 virginica 2023
## 43          5.8         2.7          5.1         1.9 virginica 2013
## 44          6.8         3.2          5.9         2.3 virginica 2013
## 45          6.7         3.3          5.7         2.5 virginica 2013
## 46          6.7         3.0          5.2         2.3 virginica 2003
## 47          6.3         2.5          5.0         1.9 virginica 2023
## 48          6.5         3.0          5.2         2.0 virginica 2003
## 49          6.2         3.4          5.4         2.3 virginica 2023
## 50          5.9         3.0          5.1         1.8 virginica 2003</code></pre>
<p>Debemos tener en cuenta que si usamos filter tendremos que siempre tener un operador en el argumento de la función. En este caso era el operado <code>==</code> que es un <em>igual</em>, pero de forma literal, no como una asignación.
Otro ejemplo podría ser seleccionar aquellas filas que tengan un largo de petalos mayor a 4.5, por ejemplo</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="principios-de-tidydata.html#cb7-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="principios-de-tidydata.html#cb7-2" tabindex="-1"></a>  <span class="fu">filter</span>(Petal.Length <span class="sc">&gt;</span> <span class="fl">4.5</span>)</span></code></pre></div>
<pre><code>##    Sepal.Length Sepal.Width Petal.Length Petal.Width    Species  Año
## 1           7.0         3.2          4.7         1.4 versicolor 2023
## 2           6.9         3.1          4.9         1.5 versicolor 2023
## 3           6.5         2.8          4.6         1.5 versicolor 2003
## 4           6.3         3.3          4.7         1.6 versicolor 2013
## 5           6.6         2.9          4.6         1.3 versicolor 2023
## 6           6.1         2.9          4.7         1.4 versicolor 2023
## 7           5.9         3.2          4.8         1.8 versicolor 2023
## 8           6.3         2.5          4.9         1.5 versicolor 2013
## 9           6.1         2.8          4.7         1.2 versicolor 2023
## 10          6.8         2.8          4.8         1.4 versicolor 2003
## 11          6.7         3.0          5.0         1.7 versicolor 2023
## 12          6.0         2.7          5.1         1.6 versicolor 2013
## 13          6.7         3.1          4.7         1.5 versicolor 2003
## 14          6.1         3.0          4.6         1.4 versicolor 2003
## 15          6.3         3.3          6.0         2.5  virginica 2013
## 16          5.8         2.7          5.1         1.9  virginica 2023
## 17          7.1         3.0          5.9         2.1  virginica 2023
## 18          6.3         2.9          5.6         1.8  virginica 2023
## 19          6.5         3.0          5.8         2.2  virginica 2003
## 20          7.6         3.0          6.6         2.1  virginica 2023
## 21          7.3         2.9          6.3         1.8  virginica 2013
## 22          6.7         2.5          5.8         1.8  virginica 2003
## 23          7.2         3.6          6.1         2.5  virginica 2013
## 24          6.5         3.2          5.1         2.0  virginica 2003
## 25          6.4         2.7          5.3         1.9  virginica 2013
## 26          6.8         3.0          5.5         2.1  virginica 2003
## 27          5.7         2.5          5.0         2.0  virginica 2013
## 28          5.8         2.8          5.1         2.4  virginica 2003
## 29          6.4         3.2          5.3         2.3  virginica 2023
## 30          6.5         3.0          5.5         1.8  virginica 2013
## 31          7.7         3.8          6.7         2.2  virginica 2003
## 32          7.7         2.6          6.9         2.3  virginica 2013
## 33          6.0         2.2          5.0         1.5  virginica 2013
## 34          6.9         3.2          5.7         2.3  virginica 2023
## 35          5.6         2.8          4.9         2.0  virginica 2003
## 36          7.7         2.8          6.7         2.0  virginica 2013
## 37          6.3         2.7          4.9         1.8  virginica 2023
## 38          6.7         3.3          5.7         2.1  virginica 2013
## 39          7.2         3.2          6.0         1.8  virginica 2023
## 40          6.2         2.8          4.8         1.8  virginica 2003
## 41          6.1         3.0          4.9         1.8  virginica 2023
## 42          6.4         2.8          5.6         2.1  virginica 2013
## 43          7.2         3.0          5.8         1.6  virginica 2013
## 44          7.4         2.8          6.1         1.9  virginica 2013
## 45          7.9         3.8          6.4         2.0  virginica 2003
## 46          6.4         2.8          5.6         2.2  virginica 2003
## 47          6.3         2.8          5.1         1.5  virginica 2023
## 48          6.1         2.6          5.6         1.4  virginica 2003
## 49          7.7         3.0          6.1         2.3  virginica 2003
## 50          6.3         3.4          5.6         2.4  virginica 2003
## 51          6.4         3.1          5.5         1.8  virginica 2013
## 52          6.0         3.0          4.8         1.8  virginica 2003
## 53          6.9         3.1          5.4         2.1  virginica 2023
## 54          6.7         3.1          5.6         2.4  virginica 2013
## 55          6.9         3.1          5.1         2.3  virginica 2023
## 56          5.8         2.7          5.1         1.9  virginica 2013
## 57          6.8         3.2          5.9         2.3  virginica 2013
## 58          6.7         3.3          5.7         2.5  virginica 2013
## 59          6.7         3.0          5.2         2.3  virginica 2003
## 60          6.3         2.5          5.0         1.9  virginica 2023
## 61          6.5         3.0          5.2         2.0  virginica 2003
## 62          6.2         3.4          5.4         2.3  virginica 2023
## 63          5.9         3.0          5.1         1.8  virginica 2003</code></pre>
</div>
<div id="crear-nuevas-variables" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Crear nuevas variables<a href="principios-de-tidydata.html#crear-nuevas-variables" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Con <code>mutate()</code> podemos crear una nueva columna de forma explícita. Por ejemplo, si quisieramos saber cuales son las especies y años en que se colectaron especies con una razon largo/ancho determinado.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="principios-de-tidydata.html#cb9-1" tabindex="-1"></a>iris <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="principios-de-tidydata.html#cb9-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Petal.Ratio =</span> Petal.Length<span class="sc">/</span>Petal.Width)<span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="principios-de-tidydata.html#cb9-3" tabindex="-1"></a>  <span class="fu">select</span>(Petal.Ratio,Species,Año) <span class="sc">|&gt;</span></span>
<span id="cb9-4"><a href="principios-de-tidydata.html#cb9-4" tabindex="-1"></a>  <span class="fu">group_by</span>(Species,Año) <span class="sc">|&gt;</span></span>
<span id="cb9-5"><a href="principios-de-tidydata.html#cb9-5" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Petal.Ratio.Mean =</span> <span class="fu">mean</span>(Petal.Ratio)) <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="principios-de-tidydata.html#cb9-6" tabindex="-1"></a>  <span class="fu">filter</span>(Petal.Ratio.Mean <span class="sc">&gt;</span> <span class="fu">median</span>(Petal.Ratio.Mean))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;Species&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 3 × 3
## # Groups:   Species [3]
##   Species    Año   Petal.Ratio.Mean
##   &lt;fct&gt;      &lt;chr&gt;            &lt;dbl&gt;
## 1 setosa     2023              7.75
## 2 versicolor 2003              3.27
## 3 virginica  2013              2.85</code></pre>
</div>
<div id="responder" class="section level3 hasAnchor" number="3.2.6">
<h3><span class="header-section-number">3.2.6</span> Responder:<a href="principios-de-tidydata.html#responder" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>¿Escriba la pregunta que responde el análisis?</li>
<li>En función del último análisis, ¿existe diferencia interespecífica en la relación entre largo y ancho largo para estes grupo de especies?
-¿Cómo formularías la pregunta anterior de forma mas precisa en función del análisis anterior?</li>
</ul>
</div>
</div>
<div id="cambiar-formato-de-tabla" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Cambiar formato de tabla<a href="principios-de-tidydata.html#cambiar-formato-de-tabla" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Muchas veces es necesario reorientar la tabla de datos.</p>
<p>Primero, podríamos interesarnos en definir clases para las muestras. Definimos tamaños como clases usando terciles.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="principios-de-tidydata.html#cb12-1" tabindex="-1"></a>etiquetas <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;alto&quot;</span>,<span class="st">&quot;medio&quot;</span>,<span class="st">&quot;bajo&quot;</span>)</span>
<span id="cb12-2"><a href="principios-de-tidydata.html#cb12-2" tabindex="-1"></a>miIris <span class="ot">&lt;-</span> iris <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="principios-de-tidydata.html#cb12-3" tabindex="-1"></a>  <span class="fu">mutate</span>(Tamaño <span class="ot">=</span> <span class="fu">factor</span>(<span class="fu">ntile</span>(Petal.Length<span class="sc">/</span>Petal.Width,<span class="dv">3</span>),<span class="at">ordered =</span> <span class="cn">TRUE</span>, <span class="at">labels =</span> etiquetas))</span></code></pre></div>
<p>Luego vamos a re-orientar la tabla de manera a poder indagar si existe diferencia entre especies respecto de la característica <code>Tamaño</code></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb13-1"><a href="principios-de-tidydata.html#cb13-1" tabindex="-1"></a>miIris <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="principios-de-tidydata.html#cb13-2" tabindex="-1"></a>  <span class="fu">select</span>(Species, Año,Tamaño,Sepal.Width) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="principios-de-tidydata.html#cb13-3" tabindex="-1"></a>  tidyr<span class="sc">::</span><span class="fu">pivot_wider</span>(<span class="at">names_from =</span> Tamaño, <span class="at">values_from =</span> Sepal.Width,<span class="at">values_fn=</span>mean)</span></code></pre></div>
<pre><code>## # A tibble: 9 × 5
##   Species    Año    bajo medio  alto
##   &lt;fct&gt;      &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 setosa     2023   3.47 NA    NA   
## 2 setosa     2003   3.34  3.85  3.5 
## 3 setosa     2013   3.37  3.9  NA   
## 4 versicolor 2023   2.8   2.72  2.95
## 5 versicolor 2013   2.7   2.56  3.07
## 6 versicolor 2003   2.2   2.81  2.7 
## 7 virginica  2013  NA     2.83  2.97
## 8 virginica  2023  NA     2.98  2.99
## 9 virginica  2003   2.6   3.15  3.04</code></pre>
<div id="podemos-explicar-que-sucedió-aquí" class="section level3 hasAnchor" number="3.3.1">
<h3><span class="header-section-number">3.3.1</span> ¿Podemos explicar que sucedió aquí?<a href="principios-de-tidydata.html#podemos-explicar-que-sucedió-aquí" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>¿En qué caso aparecen los <code>NA</code>?</li>
<li>¿Qué tipo de gráfico evidenciaría la relación entre el ratio largo:ancho del pétalo y el ancho del sépalo?</li>
<li>grafica</li>
</ul>
</div>
</div>
<div id="recursos" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Recursos<a href="principios-de-tidydata.html#recursos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><a href="https://www.rstudio.com/wp-content/uploads/2015/02/data-wrangling-cheatsheet.pdf">data wrangling cheatsheet</a></li>
<li>[tablas bonitinhas con Kable] (<a href="https://haozhu233.github.io/kableExtra/awesome_table_in_html.html" class="uri">https://haozhu233.github.io/kableExtra/awesome_table_in_html.html</a>)</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introducción.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["CursoProgramacion.pdf", "CursoProgramacion.epub", "CursoProgramacion.docx"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
