{"title":"Visualización de datos en R","markdown":{"yaml":{"title":"Visualización de datos en R","author":"Derek Corcoran","date":"`r format(Sys.time(), '%d/%m, %Y')`","output":{"ioslides_presentation":{"widescreen":true,"incremental":true}}},"headingText":"Trabajemos con las áreas protegidas","headingAttr":{"id":"","classes":["small"],"keyvalue":[]},"containsRefs":false,"markdown":"\n\n```{r setup, include=FALSE}\nknitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE, cache = FALSE, tidy = TRUE, tidy.opts = list(width.cutoff = 50))\nlibrary(tidyverse)\nlibrary(broom)\nlibrary(kableExtra)\nlibrary(knitr)\noptions(\"kableExtra.html.bsTable\" = T)\n```\n\n\n```{r}\ngithubURL <- (\"https://raw.githubusercontent.com/Curso-programacion/Tarea_1/master/Protected_Areas.rds\")\ndownload.file(githubURL,\"PA.rds\", method=\"curl\")\nPA <- readRDS(\"PA.rds\")\n```\n\n```{r, echo = FALSE, message=F, error=F}\nfile.remove(\"PA.rds\")\n```\n\n\n## ggplot2\n\n* ggplot(data.frame, aes(nombres de columna))\n* + geom_algo(argumentos, aes(columnas))\n* + theme_algo() estilo\n* Personalización de ejes y leyendas\n* Dos [links](https://ggplot2.tidyverse.org/) para aprender [mas](https://raw.githubusercontent.com/rstudio/cheatsheets/master/data-visualization-2.1.pdf).\n\n```{r, eval=FALSE}\nlibrary(tidyverse)\nggplot(PA, aes(x = STATUS_YR, y=TERR_AREA)) + geom_point(aes(color = DESIG)) + theme_classic()\n```\n\n## Ejemplo\n\n```{r, echo=FALSE}\nggplot(PA, aes(x = STATUS_YR, y=TERR_AREA)) + geom_point(aes(color = DESIG)) + theme_classic()\n```\n\n## Que diablos es aes() y por que +?\n\n* en ggplot2 cada vez que mencionamos una columna debe ser dentro de aes()\n* ggplot2 es el paquete mas antiguo del tidyverse, %>% no existia\n\n\n## Argumentos para geoms\n\n* **color**: color de líneas o puntos \n* **alpha**: transparencia, de 0 (transparente) a 1 (sólido)\n* **size**: tamaño de puntos\n* **shape**: típo de punto\n* **fill**: color dentro de un área (barras, intervalos)\n\n## color\n\n```{r}\nggplot(PA, aes(x = STATUS_YR, y=TERR_AREA)) + geom_point(aes(color = DESIG)) + theme_classic()\n```\n\n## alpha\n\n```{r}\nggplot(PA, aes(x = STATUS_YR, y=TERR_AREA)) + geom_point(aes(color = DESIG), alpha = 0.5) + theme_classic()\n```\n\n# Arreglemoslo un poco\n\n## Eje y con números en vez de con exponente\n\n```{r}\nggplot(PA, aes(x = STATUS_YR, y=TERR_AREA)) + geom_point(aes(color = DESIG)) + theme_classic() + scale_y_continuous(labels = scales::comma)\n```\n\n## Eje y logarítmico\n\n```{r}\nggplot(PA, aes(x = STATUS_YR, y=TERR_AREA)) + geom_point(aes(color = DESIG)) + theme_classic() + scale_y_log10(labels = scales::comma)\n```\n\n## size\n\n```{r}\nggplot(mtcars, aes(x = wt, y=mpg)) + geom_point(aes(size = hp)) + theme_classic()\n```\n\n## shape\n\n```{r}\n\nggplot(PA, aes(x = STATUS_YR, y=TERR_AREA)) + geom_point(aes(color = IUCN_CAT, shape = IUCN_CAT)) + theme_classic() + scale_y_log10(labels = scales::comma)\n```\n\n## fill\n\n```{r}\nggplot(PA, aes(x = IUCN_CAT, y=TERR_AREA)) + geom_boxplot(aes(fill = IUCN_CAT), notch = T) + theme_bw() + scale_y_log10(label = scales::comma)\n```\n\n# Una variable categórica una continua\n\n## Una variable categórica una continua\n\n* geom_boxplot\n* geom_jitter\n* geom_violin\n* geom_bar\n\n## geom_jitter\n\n```{r}\nggplot(iris, aes(x = Species, y = Sepal.Width)) + geom_jitter(aes(color = Species))\n```\n\n## geom_violin\n\n```{r}\nggplot(iris, aes(x = Species, y = Sepal.Width)) + geom_violin(fill = \"red\")\n```\n\n## Se pueden combinar\n\n```{r}\nggplot(iris, aes(x = Species, y = Sepal.Width)) + geom_violin() + geom_jitter(aes(color = Species))\n```\n\n## Pero el orden importa\n\n```{r}\nggplot(iris, aes(x = Species, y = Sepal.Width)) + geom_jitter(aes(color = Species)) + geom_violin()\n```\n\n# Como reordenar las variables\n\n## fct_reorder (Reordenar por otra variable)\n\n\n```{r}\nggplot(iris, aes(x = fct_reorder(Species, Sepal.Width), y=Sepal.Width)) + geom_boxplot(aes(fill = Species), notch = T) + theme_bw()\n```\n\n## fct_reorder (cont)\n\n\n```{r}\nggplot(iris, aes(x = fct_reorder(Species, Sepal.Width), y=Sepal.Width)) + geom_boxplot(aes(fill = Species), notch = T) + theme_bw() + xlab(\"lo que se me ocurra\")\n```\n\n## fct_relevel\n\n```{r}\nggplot(iris, aes(x = fct_relevel(Species, \"setosa\", \"virginica\"), y=Sepal.Width)) + geom_boxplot(aes(fill = Species), notch = T) + theme_bw() + xlab(\"lo que se me ocurra\")\n```\n\n# Apliquemoslo al Rmd\n\n## incluirlo en rmd con leyenda abajo\n\n```{r, echo=FALSE, out.width=\"500px\"}\ninclude_graphics(\"https://raw.githubusercontent.com/derek-corcoran-barrios/derek-corcoran-barrios.github.io/master/Clase4/YAML.png\")\n```\n\n\n```{r, echo=FALSE, out.width=\"500px\"}\ninclude_graphics(\"https://raw.githubusercontent.com/derek-corcoran-barrios/derek-corcoran-barrios.github.io/master/Clase4/Chunk.png\")\n```\n\n## Agregar referencias a imagenes con bookdown\n\n```{r, echo=FALSE, out.width=\"300px\"}\ninclude_graphics(\"https://raw.githubusercontent.com/derek-corcoran-barrios/derek-corcoran-barrios.github.io/master/Clase4/Bookdown.png\")\n```\n\n```{r, echo=FALSE, out.width=\"600px\"}\ninclude_graphics(\"https://raw.githubusercontent.com/derek-corcoran-barrios/derek-corcoran-barrios.github.io/master/Clase4/Bookdown2.png\")\n```\n\n* Para tablas es igual pero con \\ref(tab:Nombre)\n\n## Dos variables continuas\n\n* geom_point\n* geom_smooth\n* geom_line\n* geom_rug\n\n## geom_point y geom_smooth\n\n```{r}\ndata(\"mtcars\")\nggplot(mtcars, aes(x = wt, y = mpg)) + geom_smooth() + geom_point()\n```\n\n## geom_smooth, method\n\n```{r}\ndata(\"mtcars\")\nggplot(mtcars, aes(x = wt, y = mpg)) + geom_smooth(method = \"lm\") + geom_point()\n```\n\n# Varios gráficos juntos\n\n## Como combinar gráficos con facet_wrap\n\n\n\n```{r}\nggplot(PA, aes(x = STATUS_YR, y = TERR_AREA)) +\n  geom_point(aes(color = DESIG)) +\n  theme_bw() + \n  scale_y_log10(labels = scales::comma) +\n  labs(x = \"Año\", y = \"Área en hectáreas\", title = \"Áreas protegidas de Chile\") +\n  facet_wrap(~IUCN_CAT)\n\n```\n\n# Mapas en ggplot2\n\n## Mapas en ggplot2\n\n```{r, echo = FALSE, out.width=\"500px\", fig.align='center'}\n#knitr::include_graphics(\"https://ia803206.us.archive.org/23/items/Comunas/Metropolitana_Map_Comunas.gif\")\n#knitr::include_graphics(\"/home/derek/derek-corcoran-barrios.github.io/Clase4/Patagonia_Chile23.jpeg\")\n```\n\n\n"},"formats":{"html":{"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":false,"echo":true,"output":{"ioslides_presentation":{"widescreen":true,"incremental":true}},"warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","css":["../../styles.css"],"toc":true,"output-file":"Clase4Visualizacion.html"},"language":{},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.2.335","theme":"cosmo","title":"Visualización de datos en R","author":"Derek Corcoran","date":"`r format(Sys.time(), '%d/%m, %Y')`"},"extensions":{"book":{"multiFile":true}}}}}