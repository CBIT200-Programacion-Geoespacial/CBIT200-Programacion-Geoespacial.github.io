{
  "hash": "4af650aca66b2d45085d56b775c115e0",
  "result": {
    "markdown": "---\ntitle: \"Remote sensing\"\nauthor: \"Derek Corcoran\"\ndate: \"08/08, 2023\"\noutput:\n  ioslides_presentation:\n    widescreen: true\n    incremental: true\n---\n\n\n\n\n# ¿Qué son los sensores remotos?\n\n## Sensores remotos\n\n-   Datos satelitales\n-   Distintas resoluciones\n    -   Resolución espacial (Tamaño del grano)\n    -   Resolución temporal (Cada cuanto se toman los datos)\n    -   Espectro (Distintas bandas)\n\n## Algunos sensores remotos\n\n-   Modis\n-   Landsat\n-   Sentinel\n\n## Landsat\n\n- Van 9 misiones (1972 -- )\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-1_7a6a782defb237b2a1571810c90ee428'}\n\n:::\n\n\n- Chequear coincidencia entre satélites\n\n## Datos landsat\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-2_6aeb624ab7bb8ea242c6cf1689c30bb1'}\n\n:::\n\n\n## Datos Landsat \n\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-3_ee37da5c6652d04a350a74fc6a7daa55'}\n\n:::\n\n\n## Sentinel 2\n\n-   Mayor resolución\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-4_846636d5c290407fd27eca88d1b74b10'}\n\n:::\n\n\n# RGEE\n\n## Google Earth Engine\n\n-   Servidores de google para [calculos geoespaciales](https://earthengine.google.com/)\n-   Gran cantidad de [bases de datos](https://developers.google.com/earth-engine/datasets/) disponibles\n-   Tutorial en [español](https://barja8.github.io/Handbook_rgee/pdf/vol01.pdf)\n-   Veamos [NDVI](https://developers.google.com/earth-engine/datasets/catalog/LANDSAT_LE07_C01_T1_8DAY_NDVI) de Landsat 7\n\n## NDVI\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-5_e635ad1389adce6415b31226929fb656'}\n\n:::\n\n\n-   entre -1 y 1\n\n## Empezemos el rgee\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-6_70d51977b10f17c2cc452e93c2f005cb'}\n\n```{.r .cell-code}\nlibrary(rgee)\nee_Initialize()\n```\n:::\n\n\n-   Leamos la capa de google earth engine\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-7_a8730a65584ddb66ae731df0fc212a7a'}\n\n```{.r .cell-code}\ncol <- ee$ImageCollection(\"COPERNICUS/S2_SR\")\n```\n:::\n\n\n-   Filtramos por latitud y longitud y por fecha\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-8_f8dc3cae8435e46a709cfb58fbc3e8a0'}\n\n```{.r .cell-code}\npoint <- ee$Geometry$Point(-71.6002957, -33.0055093)\nstart <- ee$Date(\"2020-02-11\")\nend <- ee$Date(\"2020-02-20\")\nfilter <- col$filterBounds(point)$filterDate(start, end)\nimg <- filter$first()\n```\n:::\n\n\n## Visualización\n\n-   Seleccionamos bandas\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-9_11b94b51dd34cd3e1fe745a4c05e4879'}\n\n```{.r .cell-code}\nvPar <- list(bands = c(\"B4\", \"B3\", \"B2\"), min = 100, max = 8000,\n    gamma = c(1.9, 1.7, 1.7))\n```\n:::\n\n\n-   Visualizamos\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-10_886188420de5148936c693079722a223'}\n\n```{.r .cell-code}\nMap$setCenter(-71.6002957, -33.0055093, zoom = 10)\nMap$addLayer(img, vPar, \"Color real\")\n```\n:::\n\n\n## Ahora NDVI\n\n-   Obtenemos el NDVI\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-11_8c66aa67de16847fa8c6cb357ca87d9b'}\n\n```{.r .cell-code}\ngetNDVI <- function(image) {\n    return(image$normalizedDifference(c(\"B8\", \"B4\")))\n}\nndvi1 <- getNDVI(img)\nndviPar <- list(palette = c(\"#cccccc\", \"#f46d43\", \"#fdae61\",\n    \"#fee08b\", \"#d9ef8b\", \"#a6d96a\", \"#66bd63\", \"#1a9850\"), min = 0,\n    max = 1)\n```\n:::\n\n\n## ¿Cómo se vé?\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-12_e46a1e2f4fdab23d35e5e08d0e694ad3'}\n\n```{.r .cell-code}\nMap$setCenter(-71.6002957, -33.0055093, zoom = 10)\nMap$addLayer(ndvi1, ndviPar, \"NDVI verano\")\n```\n:::\n\n\n# Análisis continuo\n\n## Más NDVI\n\n-   Leemos un polígono y lo tranformamos en fomrato `ee`\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-13_eda5e45f6e45ef23d4b161303d0e79ea'}\n\n```{.r .cell-code}\nlibrary(raster)\nlibrary(sf)\nlibrary(tidyverse)\nee_x <- st_read(system.file(\"shape/nc.shp\", package = \"sf\"))\nValpoVina <- getData(\"GADM\", country = \"CHL\", level = 2) %>%\n    st_as_sf() %>%\n    dplyr::filter(NAME_1 == \"Valparaíso\", NAME_2 %in% c(\"Valparaíso\")) %>%\n    st_transform(st_crs(ee_x)) %>%\n    sf_as_ee()\n```\n:::\n\n\n## Cortamos NDVI\n\n-   Obtenemos NDVI para un año\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-14_2517e4b53a7bb795041bd764f7347fa2'}\n\n```{.r .cell-code}\nstart <- ee$Date(\"2020-01-01\")\nend <- ee$Date(\"2020-12-31\")\ncol <- ee$ImageCollection(\"LANDSAT/LE07/C01/T1_8DAY_NDVI\")\nfilter <- col$filterBounds(point)$filterDate(start, end)$select(\"NDVI\")\nee_ndvi_valpo <- ee_extract(x = filter, y = ValpoVina, sf = FALSE)\nee_ndvi_valpo2 <- ee_ndvi_valpo %>%\n    pivot_longer(everything(), values_to = \"NDVI\") %>%\n    mutate(Fecha = lubridate::ymd(str_remove_all(name, \"X\")))\nggplot(ee_ndvi_valpo2, aes(x = Fecha, y = NDVI)) + geom_path() +\n    geom_point()\n```\n:::\n\n\n## Ahora veamos varios años\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-15_9c98827c2097462072cbe8cdd592519f'}\n\n```{.r .cell-code}\nstart <- ee$Date(\"2014-01-01\")\nend <- ee$Date(\"2020-12-31\")\ncol <- ee$ImageCollection(\"LANDSAT/LE07/C01/T1_8DAY_NDVI\")\nfilter <- col$filterBounds(point)$filterDate(start, end)$select(\"NDVI\")\nee_ndvi_valpo <- ee_extract(x = filter, y = ValpoVina, sf = FALSE)\nee_ndvi_valpo2 <- ee_ndvi_valpo %>%\n    pivot_longer(everything(), values_to = \"NDVI\") %>%\n    mutate(Fecha = lubridate::ymd(str_remove_all(name, \"X\")))\nggplot(ee_ndvi_valpo2, aes(x = Fecha, y = NDVI)) + geom_path() +\n    geom_point()\n```\n:::\n\n\n## Análisis\n\n-   ¿Qué pasa por día?\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-16_ddb33990e00b0efd23cc5e25b748468a'}\n\n```{.r .cell-code}\nee_ndvi_valpo2 <- ee_ndvi_valpo2 %>%\n    mutate(Dia = lubridate::yday(Fecha), Mes = lubridate::month(Fecha))\nggplot(ee_ndvi_valpo2, aes(x = Dia, y = NDVI)) + geom_point()\n```\n:::\n\n\n-   ¿Qué pasa por mes?\n\n\n::: {.cell layout-align=\"center\" hash='Clase11_RemoteSens_cache/html/unnamed-chunk-17_ca84b74798144056d955df30230ac56c'}\n\n```{.r .cell-code}\nee_ndvi_valpo_summary <- ee_ndvi_valpo2 %>%\n    group_by(Mes) %>%\n    summarise(sd = sd(NDVI), NDVI = mean(NDVI))\nggplot(ee_ndvi_valpo_summary, aes(x = Mes, y = NDVI)) + geom_ribbon(aes(ymax = NDVI +\n    sd, ymin = NDVI - sd), alpha = 0.3, fill = \"red\") + geom_point() +\n    geom_path()\n```\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}