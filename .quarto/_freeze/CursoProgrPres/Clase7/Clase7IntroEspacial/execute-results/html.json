{
  "hash": "536c8f498fcf0bee357b785db609cafd",
  "result": {
    "markdown": "---\ntitle: \"Introducción a Sistemas de Información Geográfica\"\nauthor: \"Derek Corcoran\"\ndate: \"08/08, 2023\"\noutput:\n  ioslides_presentation:\n    widescreen: true\n    incremental: true\n---\n\n\n\n\n# Que es el SIG\n\n## Sistema de Información Geográfica {.build}\n\n-   Representación de datos de forma espacial\n-   Muchos tipos de datos\n    -   Datos de captura remota (Satelites lidar)\n    -   Datos modelados (Modelos Distribución de Especies)\n    -   Datos de expertos\n    -   Planes futuros (Panificación territorial)\n    -   Mapas de fantasía (Tierra Media, Westeros)\n-   Dos formatos principales\n    -   Datos Vectoriales (Shapefiles)\n    -   Datos en grilla (Rasters)\n\n## Datos Vectoriales\n\n-   Shapefiles\n-   Puntos (Ciudades, presencias de especies, sucesos, sitios de muestreo)\n-   Lineas (Ríos, Carreteras, Caminos, Senderos)\n-   Polígonos (Países, Regiones, Lagos)\n-   Paquetes (sf, sp, raster)\n\n## Ejemplos datos vectoriales\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\nlibrary(tidyverse)\nlibrary(rworldxtra)\ndata(\"countriesHigh\")\nMundo <- st_as_sf(countriesHigh)\nggplot() + geom_sf(data = Mundo, aes(fill = POP_EST))\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n\n## Ejemplos datos vectoriales (cont.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + geom_sf(data = Mundo, aes(fill = continent))\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n## Elegir parte de datos vectoriales\n\n\n::: {.cell}\n\n```{.r .cell-code}\nAfrica <- Mundo %>%\n    dplyr::filter(continent == \"Africa\")\nggplot() + geom_sf(data = Africa, aes(fill = POP_EST))\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n## Modificar datos vectoriales\n\n\n::: {.cell}\n\n```{.r .cell-code}\nAfrica <- Africa %>%\n    mutate(Poblacion_mill = POP_EST/1e+06)\nggplot() + geom_sf(data = Africa, aes(fill = Poblacion_mill)) +\n    theme_bw() + scale_fill_viridis_c()\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n## Modificar datos vectoriales (Cont.)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nAfrica <- Africa %>%\n    mutate(PIB_per_Cap = GDP_MD_EST/POP_EST)\nggplot() + geom_sf(data = Africa, aes(fill = PIB_per_Cap)) +\n    theme_bw()\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n## Exportar y leer datos vectoriales\n\n\n::: {.cell}\n\n```{.r .cell-code}\nAfrica <- Africa %>%\n    dplyr::select(NAME, Poblacion_mill, PIB_per_Cap, GLOCAF)\nwrite_sf(Africa, \"Africa.shp\")\nAfrica2 <- read_sf(\"Africa.shp\")\nggplot() + geom_sf(data = Africa2, aes(fill = GLOCAF)) + theme_dark()\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n## Algunas bases de datos vectoriales\n\n-   [Datos vectoriales del mundo](http://www.diva-gis.org/gdata)\n-   [Datos vectoriales de Chile](https://www.bcn.cl/siit/mapas_vectoriales)\n\n## Algunas bases de datos vectoriales\n\n-   En raster función `getData(\"GADM\")`\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPeru <- getData(name = \"GADM\", country = \"PER\", level = 1) %>%\n    st_as_sf()\nggplot() + geom_sf(data = Peru) + theme(legend.position = \"none\")\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n# Raster\n\n## Datos en grilla\n\n-   Como una foto\n-   Cada pixel tiene ciertas caracteristicas (Resolución, Proyección, Unidades)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPrec <- getData(\"worldclim\", res = 10, var = \"prec\")\nPrec\n```\n\n::: {.cell-output .cell-output-stdout}\n```\nclass      : RasterStack \ndimensions : 900, 2160, 1944000, 12  (nrow, ncol, ncell, nlayers)\nresolution : 0.1666667, 0.1666667  (x, y)\nextent     : -180, 180, -60, 90  (xmin, xmax, ymin, ymax)\ncrs        : +proj=longlat +datum=WGS84 +no_defs \nnames      : prec1, prec2, prec3, prec4, prec5, prec6, prec7, prec8, prec9, prec10, prec11, prec12 \nmin values :     0,     0,     0,     0,     0,     0,     0,     0,     0,      0,      0,      0 \nmax values :   885,   736,   719,   820,   955,  1850,  2088,  1386,   904,    980,    893,    914 \n```\n:::\n:::\n\n\n## Precipitacion\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(Prec)\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n## Subset de stacks\n\n\n::: {.cell}\n\n```{.r .cell-code}\nInvierno <- Prec[[c(6, 7, 8)]]\nplot(Invierno)\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n## Operaciones Simples\n\n\n::: {.cell}\n\n```{.r .cell-code}\nTotal_inv <- Prec[[1]] + Prec[[2]] + Prec[[3]]\nplot(Total_inv)\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n## O resumen total\n\n\n::: {.cell}\n\n```{.r .cell-code}\nPP_Total <- sum(Prec)\nplot(PP_Total)\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n## Cortar un raster (En base a otro mapa)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nRaster_Africa <- PP_Total %>%\n    crop(Africa)\nplot(Raster_Africa)\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n## Exportar y leer un raster\n\n\n::: {.cell}\n\n```{.r .cell-code}\nwriteRaster(Raster_Africa, \"PP_Africa.tif\", overwrite = T)\nAfricaRast2 <- raster(\"PP_Africa.tif\")\n```\n:::\n\n\n## Exportar y leer un raster\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot(AfricaRast2)\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n## Proyecciones y por que importan\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\n\n## Proyecciones\n\n\n::: {.cell}\n\n```{.r .cell-code}\nproj4string(AfricaRast2)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"+proj=longlat +datum=WGS84 +no_defs\"\n```\n:::\n:::\n\n\n-   Supongamos que el gráfico anterior fuera de diversidad\n    -   Tiene sentido comparar diversidad de especies en celdas de áreas diferentes?\n-   [Projection wizard](https://projectionwizard.org/)\n-   Además por presentación\n\n## Reproyectar a equal area\n\n\n::: {.cell}\n\n```{.r .cell-code}\nnewproj <- \"+proj=laea +lon_0=18.28125 +lat_0=0 +datum=WGS84 +units=km +no_defs\"\nAfrica_igual <- projectRaster(AfricaRast2, crs = newproj)\nplot(Africa_igual)\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n## La prueba\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n# Graficar juntos\n\n## Graficar rasters y shapefiles juntos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nAfrica_DF <- AfricaRast2 %>%\n    as(\"SpatialPixelsDataFrame\") %>%\n    as.data.frame()\nAfrica_DF <- Africa_DF %>%\n    rename(Prec = PP_Africa)\nggplot() + geom_tile(data = Africa_DF, aes(x = x, y = y, fill = Prec)) +\n    geom_sf(data = Africa, alpha = 0) + theme_bw() + scale_fill_viridis_c()\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\n## Graficar rasters y shapefiles juntos\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot() + geom_tile(data = Africa_DF, aes(x = x, y = y, fill = Prec)) +\n    geom_sf(data = Africa, alpha = 0) + coord_sf(crs = \"+proj=laea +lon_0=18.28125 +lat_0=0 +datum=WGS84 +units=km +no_defs\") +\n    theme_bw() + scale_fill_viridis_c()\n```\n\n::: {.cell-output-display}\n![](Clase7IntroEspacial_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n# Mas preguntas?\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "Clase7IntroEspacial_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}